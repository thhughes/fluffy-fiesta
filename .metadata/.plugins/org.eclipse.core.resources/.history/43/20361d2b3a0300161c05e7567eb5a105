package hanto.studentthhughes;

import hanto.common.HantoCoordinate;
import hanto.common.HantoException;
import hanto.common.HantoGame;
import hanto.common.HantoPiece;
import hanto.common.HantoPieceType;
import hanto.common.HantoPlayerColor;
import hanto.common.MoveResult;
import hanto.studentthhughes.common.colormanager.ColorManager;
import hanto.studentthhughes.common.gamestateevaluator.GameStateEvaluator;
import hanto.studentthhughes.common.hantoboardandboardtools.HantoBoard;
import hanto.studentthhughes.common.hantoboardandboardtools.HantoBoardImpl;
import hanto.studentthhughes.common.movecounter.MoveCounterImpl;
import hanto.studentthhughes.common.turnactionvalidator.TurnActionValidator;

public abstract class TemplateHantoGame implements HantoGame {
	
	protected ColorManager hantoColorManager;
	protected HantoPlayerColor playerColor;
	protected HantoBoard hantoBoard = new HantoBoardImpl();
	protected MoveCounterImpl hantoMC = new MoveCounterImpl();
	protected TurnActionValidator actionValidator;
	protected GameStateEvaluator gameStateEvaluator;
	protected boolean gameOver = false;
	protected boolean canSurrender = false;
	protected MoveResult surrenderOutcome = null;
	protected MoveResult result = MoveResult.OK;
	
	
	/**
	 * Constructor for a hanto game: 
	 * @param firstMovePlayer
	 * 					HantoPlayerColor : player who goes first
	 * @param mValidator
	 * 					MoveValidator :
	 * @param bValidator
	 * 					BoardValidator :
	 */
	public TemplateHantoGame(HantoPlayerColor firstMovePlayer, TurnActionValidator tav, GameStateEvaluator gse){
		hantoColorManager = new ColorManager(firstMovePlayer);
		actionValidator = tav;
		gameStateEvaluator = gse;
		
	}

	@Override
	public MoveResult makeMove(HantoPieceType pieceType, HantoCoordinate from, HantoCoordinate to)
			throws HantoException {
		if(gameOver){
			handleGameOver();
		}
		
		playerColor = hantoColorManager.getCurrentColor();
		
		if(canSurrender && isPlayerSurrendering(pieceType, from, to)){
			handleSurrender()
		}else{
			
		}
		return result;
	}

	protected void handleSurrender() {
		HantoPlayerColor 
		
	}

	/**
	 * This function checks if a player is surrendering.
	 * 
	 * @param pieceType
	 * 				HantoPieceType
	 * @param from
	 * 				HantoCoordinate
	 * @param to
	 * 			HantoCoordinate
	 * @return
	 * 			Boolean : True if the player is surrendering
	 */
	protected boolean isPlayerSurrendering(HantoPieceType pieceType, HantoCoordinate from, HantoCoordinate to) {
		return (pieceType == null) && (from == null) && (to == null);
	}

	/**
	 * This function handles what to do if there is a game over. 
	 * 
	 * @throws HantoException
	 */
	protected void handleGameOver() throws HantoException {
		throw new HantoException("Game is over, cannot make moves after game has terminated");
	}

	@Override
	public HantoPiece getPieceAt(HantoCoordinate where) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public String getPrintableBoard() {
		// TODO Auto-generated method stub
		return null;
	}

}
