/*******************************************************************************
 * This files was developed for CS4233: Object-Oriented Analysis & Design. The course was
 * taken at Worcester Polytechnic Institute. All rights reserved. This program and the
 * accompanying materials are made available under the terms of the Eclipse Public License
 * v1.0 which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *******************************************************************************/
package hanto.studentthhughes.common;


import java.util.LinkedList;
import java.util.Queue;

import hanto.common.HantoGameID;
import hanto.common.HantoPieceType;
import hanto.studentthhughes.common.movevalidator.MasterValidator;
import hanto.studentthhughes.common.movevalidator.LimitMoveLengthToOneValidator;
import hanto.studentthhughes.common.movevalidator.MoveValidator;
import hanto.studentthhughes.common.movevalidator.PlayingTooManyPieceValidator;
import hanto.studentthhughes.common.movevalidator.TwoSpacesFreeToWalkValidator;
import hanto.studentthhughes.common.movevalidator.WalkingPieceValidator;
import hanto.studentthhughes.common.movevalidator.dualchecks.GeneralPieceValidator;
import hanto.studentthhughes.common.movevalidator.movecheckers.LocationValidator;
import hanto.studentthhughes.common.movevalidator.movecheckers.MoveRealPieceValidator;
import hanto.studentthhughes.common.movevalidator.placecheckers.ButterflyPlacedInTimeValidator;
import hanto.studentthhughes.common.movevalidator.placecheckers.CorrectNumberOfPieceTypeValidator;
import hanto.studentthhughes.common.movevalidator.placecheckers.FirstMoveValidator;
import hanto.teststudentthhughes.common.movevalidator.PieceSpecificMoveValidator;

/**
 * This is a factory for MoveValidator
 * @author Troy
 *
 */
public class HantoMoveValidatorFactory {

	private static final HantoMoveValidatorFactory instance = new HantoMoveValidatorFactory();
	
	
	private HantoMoveValidatorFactory(){
		
	}
	
	public static HantoMoveValidatorFactory getInstance(){
		return instance;
	}
	
	/**
	 * Get the move validator for your type of game
	 * @param gameID
	 * 				HantoGameID : of the game type you want your validator to be
	 * @return
	 * 			MoveValidator : of the hantoGameId Passed
	 */
	public MoveValidator makeHantoValidator(HantoGameID gameID){
		Queue<HantoPieceType> valid = new LinkedList<HantoPieceType>();
		MasterValidator mv = null;
		switch (gameID) {
			case ALPHA_HANTO:
				break;
			case BETA_HANTO:
				break;
			case GAMMA_HANTO:
				valid.clear();
				valid.add(HantoPieceType.SPARROW);
				valid.add(HantoPieceType.BUTTERFLY);
				
				mv = new MasterValidator();
				
				mv.addValidator(new LocationValidator());
				mv.addValidator(new GeneralPieceValidator(valid));
				mv.addValidator(new FirstMoveValidator());
				mv.addValidator(new CorrectNumberOfPieceTypeValidator(HantoPieceType.BUTTERFLY,1));
				mv.addValidator(new CorrectNumberOfPieceTypeValidator(HantoPieceType.SPARROW,5));
				mv.addValidator(new ButterflyPlacedInTimeValidator(4));
				mv.addValidator(new LimitMoveLengthToOneValidator());
				mv.addValidator(new TwoSpacesFreeToWalkValidator());
				mv.addValidator(new MoveRealPieceValidator());
//				mv.addValidator(new PlayingTooManyPieceValidator(6));
				break;
			case DELTA_HANTO:
				valid.clear();
				valid.add(HantoPieceType.SPARROW);
				valid.add(HantoPieceType.BUTTERFLY);
				valid.add(HantoPieceType.CRAB);
				
				mv = new MasterValidator();
				
				mv.addValidator(new LocationValidator());
				mv.addValidator(new GeneralPieceValidator(valid));
				mv.addValidator(new FirstMoveValidator());
				mv.addValidator(new CorrectNumberOfPieceTypeValidator(HantoPieceType.BUTTERFLY,1));
				mv.addValidator(new CorrectNumberOfPieceTypeValidator(HantoPieceType.SPARROW,5));
				mv.addValidator(new CorrectNumberOfPieceTypeValidator(HantoPieceType.CRAB,4));
				mv.addValidator(new ButterflyPlacedInTimeValidator(4));
				mv.addValidator(new PieceSpecificMoveValidator(HantoPieceType.CRAB,
						new WalkingPieceValidator(3)));
				mv.addValidator(new PieceSpecificMoveValidator(HantoPieceType.BUTTERFLY,
						new WalkingPieceValidator(1)));
				mv.addValidator(new TwoSpacesFreeToWalkValidator());
				mv.addValidator(new MoveRealPieceValidator());
//				mv.addValidator(new PlayingTooManyPieceValidator(6)); // Need to refactor this the number of pieces
																		// Use the pieceSpecific MoveValidator
			default:
				break;
		}
		return mv;
	}
}
